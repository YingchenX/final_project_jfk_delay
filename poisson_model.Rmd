---
title: "Poisson model"
output: github_document
---

```{r}
library(dplyr)
library(tidyverse)
library(ggridges)
library(patchwork)

knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "bottom"))


cancelation = read_csv("tidied_data/cancel.csv")
covid = read_csv("tidied_data/covid.csv")
delay = read_csv("tidied_data/delay.csv")
weather = read_csv("tidied_data/weather.csv")

```

# Outcome: mutate count cancellation data
Count numbers of cancellation by date
```{r}
cancel_date <- cancelation %>% 
  mutate(number = 1)%>% 
  mutate(number = as.numeric(number)) %>% 
  select(-flight_number,-destination_airport,-scheduled_hour,-scheduled_departure_time,-scheduled_elapsed_time_minutes) %>% 
  group_by(date) %>% 
  mutate(cancel_by_date = sum(number)) %>% 
  distinct

```


Count numbers of cancellation by airline and date
```{r}
cancel_airline <- cancelation %>% 
  mutate(number = 1)%>% 
  mutate(number = as.numeric(number)) %>% 
  select(-flight_number,-destination_airport,-scheduled_hour,-scheduled_departure_time,-scheduled_elapsed_time_minutes) %>% 
  group_by(date, airline_name) %>% 
  mutate(cancel_by_airline = sum(number)) %>% 
  distinct
```

```{r}
cancel <- cancel_date %>%
 inner_join(cancel_airline, by = c("airline_name", "date", "month", "day", "year", "number")) %>% 
 select(-number)
```

# Predictors:

```{r}

```

