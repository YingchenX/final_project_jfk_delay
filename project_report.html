<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Project Report</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="project_report.html">Project Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="xx.html">Visualization</a>
    </li>
    <li>
      <a href="xx.html">Mapping</a>
    </li>
    <li>
      <a href="xx.html">Poission Regression</a>
    </li>
    <li>
      <a href="xx.html">Predictive Model</a>
    </li>
  </ul>
</li>
<li>
  <a href="xx.html">Dashboard</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="what_to_do_JFK.html">What to do</a>
</li>
<li>
  <a href="About-us.html">About Us</a>
</li>
<li>
  <a href="mailto:&lt;jc5457@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/YingchenX/final_project_nycairport">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Project Report</h1>

</div>


<style type="text/css">

h1.title {
  text-align: center;
}

</style>
<p> </p>
<div id="introduction" class="section level1">
<h1>01 Introduction</h1>
<div id="motivation" class="section level2">
<h2>1.1 Motivation</h2>
<p>Most of us have experienced waiting at the airport for the delayed
flight. As the holiday season approaches, departure on-time have
becoming more and more challenging. This year, there are already <a
href="https://www.npr.org/2022/11/27/1139327883/flights-delayed-canceled-holiday-travel-thanksgiving">more
than 4,000 flights delayed</a> as holiday travel spikes in the U.S. The
flight delay issue especially concerns busy metropolitan airports like
JFK.</p>
<div class="figure" style="text-align: center">
<img src="pictures/jfk.gif" alt="JFK Airport in 2022 holiday season: We can't stress this enough — plan ahead and arrive early" width="100%" />
<p class="caption">
JFK Airport in 2022 holiday season: We can’t stress this enough — plan
ahead and arrive early
</p>
</div>
<p>Source: <a
href="https://twitter.com/JFKairport/status/1596760846075850752?s=20&amp;t=izIa7AkbJaJ96p0IvvPFVw">Twitter@JFKairport</a></p>
<p>Using JFK departed flights as an example, we’re interested in
exploring the factors that are potentially related with flight delay
(e.g., airlines, weather, and COVID conditions). By doing so, we’d like
to give the holiday travelers a better sense of what to expect regarding
flight delay for this holiday season, in order to make better travel
plans accordingly.</p>
<p> </p>
</div>
<div id="related-work" class="section level2">
<h2>1.2 Related Work</h2>
<div id="common-reasons-for-flight-delay" class="section level3">
<h3>Common reasons for flight delay</h3>
<p>Commercial aviation is a complex distributed transportation system.
The typical operation of a commercial flight can take place at terminal
boundaries, airports, runways, and airspace, being susceptible to
different kinds of delays. Some examples include mechanical problems,
weather conditions, ground delays, air traffic control, runway queues
and capacity constraints.</p>
<div class="figure" style="text-align: center">
<img src="pictures/delay-reason.jpg" alt="Common reasons for delay in the US, 2022" width="100%" />
<p class="caption">
Common reasons for delay in the US, 2022
</p>
</div>
<p>Source: <a
href="https://www.transtats.bts.gov/OT_Delay/OT_DelayCause1.asp">transtats.bts.gov</a></p>
<p> </p>
</div>
<div id="typical-operation-of-a-commercial-flight"
class="section level3">
<h3>Typical operation of a commercial flight</h3>
<p>The following scheme is repeated several times throughout the day for
each flight in the system:</p>
<div class="figure" style="text-align: center">
<img src="pictures/operation-flow.png" alt="A typical operation of a commercial flight" width="100%" />
<p class="caption">
A typical operation of a commercial flight
</p>
</div>
<p>Source: <a
href="https://www.researchgate.net/publication/315382748_A_Review_on_Flight_Delay_Prediction">Sternberg,
et al. (2017). A Review on Flight Delay Prediction.</a></p>
<p>Pilots, flight attendants and aircrafts may have different schedules
due to legal rests, duties, and maintenance plans for airplanes. So, any
disruption in the system can impact the subsequent flights of the same
airline. Moreover, disturbances may cause congestion at airspace or
other airports, creating queues and delaying some flights from other
carriers.</p>
<p> </p>
</div>
</div>
<div id="initial-questions" class="section level2">
<h2>1.3 Initial Questions</h2>
<p>Considering the availability and scale of the flight data, we focus
on JFK Airport’s delay and cancellation data from Nov. 1st, 2020 to Jan
31st, 2021. And then find the weather and covid cases data within that
time range accordingly. Based on these information, our final questions
are below:</p>
<ul>
<li>What are the key trends of the flights in JFK during last holiday
season?</li>
<li>What are the potential factors that contribute to the flight delay
in JFK during last holiday season?</li>
<li>Are there significant associations of multiple factors with JFK
flight delays during last holiday season?</li>
</ul>
<p> </p>
</div>
</div>
<div id="data-source-and-cleaning" class="section level1">
<h1>02 Data Source and Cleaning</h1>
<div id="data-source" class="section level2">
<h2>2.1 Data Source</h2>
<ul>
<li><a href="https://www.transtats.bts.gov/ONTIME/">JFK flight delay and
cancellation data between Nov 2020 and Jan 2021</a> - The Bureau of
Transportation Statistics (BTS)</li>
<li><a href="https://www.ncdc.noaa.gov/cdo-web/datatools/lcd">Weather
condition data</a> - The National Oceanic and Atmospheric Administration
(NOAA)</li>
<li><a
href="https://data.cityofnewyork.us/Health/COVID-19-Daily-Counts-of-Cases-Hospitalizations-an/rc75-m7u3">COVID
data</a> - NYC OpenData</li>
<li><a href="https://data.humdata.org/dataset/ourairports-usa">Airport
location information</a> - The Humanitarian Data Exchange</li>
</ul>
<p> </p>
</div>
<div id="variable-of-interest" class="section level2">
<h2>2.2 Variable of Interest</h2>
<p><strong>Outcome</strong></p>
<ul>
<li><code>delay_minutes</code>: minutes of delay</li>
<li><code>cancel_count</code>: daily flight cancellation count in JFK
airport</li>
</ul>
<p><strong>Potential Predictors</strong></p>
<ul>
<li><code>temperature</code>: daily average dry bulb temperature</li>
<li><code>humidity</code>: daily average relative humidity</li>
<li><code>windspeed</code>: daily average relative windspeed</li>
<li><code>covid_case</code>: new daily cases of COVID-19</li>
<li><code>airline_name</code>: domestic airline</li>
<li><code>year_month</code>: the date format in “Year Month”s</li>
</ul>
<p> </p>
</div>
<div id="data-cleaning" class="section level2">
<h2>2.3 Data Cleaning</h2>
<p><strong>Weather Condition</strong></p>
<p>First, we imported the NOAA weather data. To align the time unit of
weather with flight information, also considering data availability, we
picked the weather at the 51th minute to represent the weather condition
of the hour, and the weather at 23:59 to represent the weather condition
of the day.</p>
<pre class="r"><code>noaa = read_csv(&quot;data/weather.csv&quot;, na = c(&quot;&quot;,&quot;NA&quot;))

noaa_df = noaa %&gt;%
  janitor::clean_names() %&gt;% 
  select(date, starts_with(&quot;hourly&quot;)) %&gt;% 
  mutate(
    date = str_replace_all(date, &quot;T&quot;, &quot;-&quot;)
  ) %&gt;% 
  separate(date, c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;hour&quot;, &quot;minute&quot;, &quot;second&quot;), remove = FALSE) %&gt;% 
  filter(minute == &quot;51&quot;) %&gt;% 
  select(-minute, -second) %&gt;% 
  mutate(
    date = as.Date(str_left(date, n = 10), format = &quot;%Y-%m-%d&quot;),
    year = as.numeric(year),
    month = as.numeric(month),
    day = as.numeric(day),
    hour = as.numeric(hour)
  )

daily_weather_condition = noaa %&gt;%
  janitor::clean_names() %&gt;% 
  select(date, daily_weather) %&gt;% 
  filter(!is.na(daily_weather)) %&gt;% 
  mutate(
    date = str_replace_all(date, &quot;T&quot;, &quot;-&quot;)
  ) %&gt;% 
  separate(date, c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;hour&quot;, &quot;minute&quot;, &quot;second&quot;)) %&gt;% 
  select(-c(hour:second)) %&gt;% 
  mutate(
    year = as.numeric(year),
    month = as.numeric(month),
    day = as.numeric(day)
  )

noaa_df = left_join(noaa_df, daily_weather_condition, by = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;))

daily_weather = noaa %&gt;%
  janitor::clean_names() %&gt;% 
  select(date, starts_with(&quot;daily&quot;)) %&gt;% 
  mutate(
    date = str_replace_all(date, &quot;T&quot;, &quot;-&quot;)
  ) %&gt;% 
  separate(date, c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;hour&quot;, &quot;minute&quot;, &quot;second&quot;), remove = FALSE) %&gt;% 
  filter(minute == &quot;59&quot;) %&gt;% 
  select(-c(hour:second)) %&gt;% 
  mutate(
    date = as.Date(str_left(date, n = 10), format = &quot;%Y-%m-%d&quot;),
    year = as.numeric(year),
    month = as.numeric(month),
    day = as.numeric(day)
  ) %&gt;% 
  drop_na(daily_average_dew_point_temperature)</code></pre>
<p><strong>COVID</strong></p>
<pre class="r"><code>covid = 
  GET(&quot;https://data.cityofnewyork.us/resource/rc75-m7u3.csv&quot;) %&gt;% 
  content(&quot;parsed&quot;) 

covid_df = covid %&gt;% 
  select(date = date_of_interest, case_count) %&gt;%
  filter(date &lt; &quot;2022-01-31&quot; &amp; date &gt;= &quot;2021-10-31&quot;) %&gt;% 
  separate(date, c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), remove = FALSE) %&gt;% 
  mutate(
    date = as.Date(date, format = &quot;%Y-%m-%d&quot;)
  ) %&gt;% 
  mutate_if(is.character, as.numeric)</code></pre>
<p><strong>Delay</strong></p>
<pre class="r"><code>read_csv_function = function(path) {
  
  df = read_csv(path, 
                skip = 7, 
                cols(.default = &quot;c&quot;)) %&gt;%
    janitor::row_to_names(1) %&gt;% 
    janitor::clean_names()
  
  df
  
}

delay_cancel = 
  tibble(
    files = list.files(&quot;data/delay/&quot;),
    path = str_c(&quot;data/delay/&quot;, files)
  ) %&gt;% 
  mutate(data = map(path, read_csv_function)) %&gt;% 
  unnest(data) %&gt;% 
  select(-files, -path) %&gt;%
  mutate(
    airline_name = case_when(
      carrier_code == &quot;9E&quot; ~ &quot;Endeavor Air&quot;,
      carrier_code == &quot;AA&quot; ~ &quot;American Airlines&quot;,
      carrier_code == &quot;AS&quot; ~ &quot;Alaska Airlines&quot;,
      carrier_code == &quot;B6&quot; ~ &quot;JetBlue Airways&quot;,
      carrier_code == &quot;DL&quot; ~ &quot;Delta Air Lines&quot;,
      carrier_code == &quot;UA&quot; ~ &quot;United Air Lines&quot;,
      carrier_code == &quot;YX&quot; ~ &quot;Republic Airways&quot;,
      TRUE      ~ &quot;&quot;
    ),
    scheduled_hour = str_left(scheduled_departure_time, 2)
  ) %&gt;% 
  separate(date_mm_dd_yyyy, into = c(&quot;month&quot;, &quot;day&quot;, &quot;year&quot;), sep = &quot;/&quot;, remove = FALSE) %&gt;%
  mutate(
    year = as.numeric(year),
    month = as.numeric(month),
    day = as.numeric(day),
    date_mm_dd_yyyy = as.Date(date_mm_dd_yyyy, format = &quot;%m/%d/%Y&quot;)
  ) %&gt;%
  select(airline_name, date = date_mm_dd_yyyy, everything(), -carrier_code, -tail_number, -wheels_off_time) %&gt;% 
  arrange(date) %&gt;% 
  relocate(scheduled_hour, .before = scheduled_departure_time)

full_delay_df = 
  delay_cancel %&gt;% 
  filter(actual_elapsed_time_minutes != 0) %&gt;% 
  mutate(
    delay_minutes = as.numeric(as.POSIXct(actual_departure_time, format = &quot;%H:%M&quot;) - as.POSIXct(scheduled_departure_time, format = &quot;%H:%M&quot;)) / 60,
    delay_minutes = ifelse(delay_minutes &lt; -100, delay_minutes + 1440, delay_minutes)
  ) %&gt;% 
  select(-departure_delay_minutes) %&gt;% 
  relocate(delay_minutes, .after = actual_departure_time)</code></pre>
<p><strong>Cancelation</strong></p>
<pre class="r"><code>full_cancel_df = 
  delay_cancel %&gt;% 
  filter(actual_elapsed_time_minutes == 0) %&gt;% 
  select(airline_name:scheduled_departure_time, scheduled_elapsed_time_minutes)</code></pre>
<p><strong>Airport Info</strong></p>
<pre class="r"><code>airport = read_csv(&quot;data/us-airports.csv&quot;) %&gt;% 
  slice(-1) %&gt;% 
  select(airport = iata_code, name, lat = latitude_deg, long = longitude_deg, region_name, local_region, municipality)

airport_info =
  delay_cancel %&gt;% 
  distinct(destination_airport) %&gt;% 
  rename(airport = destination_airport) %&gt;% 
  rbind(&quot;JFK&quot;) %&gt;% 
  arrange(airport)

airport_info = left_join(airport_info, airport, by = &quot;airport&quot;)</code></pre>
<p><strong>Export</strong></p>
<pre class="r"><code>write_csv(noaa_df, &quot;tidied_data/hourly_weather.csv&quot;)
write_csv(daily_weather, &quot;tidied_data/daily_weather.csv&quot;)
write_csv(covid_df, &quot;tidied_data/covid.csv&quot;)
write_csv(full_delay_df, &quot;tidied_data/delay.csv&quot;)
write_csv(full_cancel_df, &quot;tidied_data/cancel.csv&quot;)
write_csv(airport_info, &quot;tidied_data/airport.csv&quot;)</code></pre>
<p> </p>
</div>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>03 Exploratory Analysis</h1>
<div id="visualization" class="section level2">
<h2>3.1 Visualization</h2>
<p> </p>
</div>
<div id="mapping" class="section level2">
<h2>3.2 Mapping</h2>
<p> </p>
</div>
</div>
<div id="additional-anslysis" class="section level1">
<h1>04 Additional Anslysis</h1>
<div id="poisson-regression" class="section level2">
<h2>4.1 Poisson Regression</h2>
<p> </p>
</div>
<div id="predictive-model-linear-regression" class="section level2">
<h2>4.2 Predictive Model (Linear Regression)</h2>
<p> </p>
</div>
</div>
<div id="discussion" class="section level1">
<h1>05 Discussion</h1>
<div id="findings" class="section level2">
<h2>5.1 Findings</h2>
<p> </p>
</div>
<div id="next-steps" class="section level2">
<h2>5.2 Next Steps</h2>
<p> </p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
